#!/usr/bin/env ruby

require_relative "../tasks/list_pulls_by_project"
require "optparse"

options = {}
project_ids = nil

parser = OptionParser.new do |opts|
  opts.banner = "Usage: bin/#{__FILE__} [options]"

  opts.on(
    "-pPROJECTIDS",
    "--project-ids=P1,P2,...",
    "Project IDs to filter, comma separated (Required) (e.g. \"5,7\")"
  ) do |p|
    project_ids = p.split(",").map(&:to_i)
  end

  opts.on("-h", "--help", "Prints this help") do
    puts opts
    exit
  end
end

parser.parse!
ListPullsByProject.run!(project_ids, options)
